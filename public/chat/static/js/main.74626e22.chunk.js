(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{10:function(e,n,t){},11:function(e,n,t){},14:function(e,n,t){"use strict";t.r(n);var r,s=t(1),u=t.n(s),c=t(5),i=t.n(c),a=(t(10),t.p+"static/media/logo.6ce24c58.svg"),o=(t(11),t(2)),l=t.n(o),b=t(3);function d(e){switch(e.type){case r.Subscribe:return function(e){var n,t="".concat(r.Subscribe);if(!(null===(n=e.subjects)||void 0===n?void 0:n.length))return null;return e.subjects.forEach((function(e){t+=" "+e})),t+="\n"}(e);case r.Unsubscribe:return function(e){var n,t="".concat(r.Unsubscribe);if(!(null===(n=e.subjects)||void 0===n?void 0:n.length))return null;return e.subjects.forEach((function(e){t+=" "+e})),t+="\n"}(e);case r.Request:return function(e){var n,t,s,u="".concat(r.Request," ");if(!e.uri)return null;if(u+=e.uri+" ",!e.inbox)return null;return u+=e.inbox+" ",u+=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.length)&&void 0!==n?n:0,u+="\n",u+=null!==(s=e.payload)&&void 0!==s?s:""}(e);case r.Response:return function(e){var n,t,s,u="".concat(r.Response," ");if(!e.uri)return null;if(u+=e.uri+" ",!e.inbox)return null;return u+=e.inbox+" ",u+=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.length)&&void 0!==n?n:0,u+="\n",u+=null!==(s=e.payload)&&void 0!==s?s:""}(e);case r.Publish:return function(e){var n,t,s="".concat(r.Publish," ");if(!e.subject)return null;return s+=e.subject+" ",s+=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.length)&&void 0!==n?n:0,s+="\n",s+=e.payload}(e)}}!function(e){e.Subscribe="SUB",e.Unsubscribe="UNSUB",e.Request="REQ",e.Response="RSP",e.Publish="PUB"}(r||(r={}));var p=t(16);function f(e){var n=new WebSocket(e),t=new Promise((function(e){n.readyState===n.OPEN?e(void 0):n.onopen=e}));function s(){return(s=Object(b.a)(l.a.mark((function e(r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:null!==(s=d(r))&&n.send(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{send:function(e){return s.apply(this,arguments)},addMessageEventListener:function(e){n.addEventListener("message",(function(n){var t=function(e){var n=e.split("\n");if(n.length<=1)return null;var t=n[0].split(" "),s=t[0],u={type:s};switch(t=t.slice(1),s){case r.Subscribe:case r.Unsubscribe:u.subjects=t;break;case r.Request:case r.Response:u.uri=t[0],u.inbox=t[1];break;case r.Publish:u.subject=t[0]}var c=n.slice(1).join("\n");return u.payload=c,u}(n.data);null!==t&&e(t)}))}}}function v(e){var n=f(e),t=function(e){var n={};function t(){return(t=Object(b.a)(l.a.mark((function t(s,u){var c,i,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(p.a)(),i={type:r.Request,uri:s,inbox:c,payload:JSON.stringify(u)},a=new Promise((function(e){n[c]=e})),e.send(i),t.next=6,a;case 6:if((o=t.sent).payload){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",JSON.parse(o.payload));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.addMessageEventListener((function(e){if(e.type===r.Response&&e.inbox){var t=n[e.inbox];t&&(t(e),delete n[e.inbox])}})),{request:function(e,n){return t.apply(this,arguments)},close:function(){}}}(n),s=function(e){var n={};return e.addMessageEventListener((function(e){if(e.type===r.Publish&&e.subject){var t=n[e.subject];t&&t(e)}})),{subscribe:function(t,s){n[t]=s,e.send({type:r.Subscribe,subjects:[t]})},unsubscribe:function(t){e.send({type:r.Unsubscribe,subjects:[t]}),delete n[t]},close:function(){}}}(n);return{request:t.request,subscribe:s.subscribe,close:function(){t.close(),s.close()}}}var h=t(0);var j=function(){return Object(s.useEffect)((function(){var e=v("wss://uaejc9t3ga.execute-api.eu-central-1.amazonaws.com/$default");e.subscribe("ping",(function(e){console.log(e)})),e.request("mantil-project-chat-ping",{}).then((function(e){console.log(e)}))})),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("img",{src:a,className:"App-logo",alt:"logo"}),Object(h.jsxs)("p",{children:["Edit ",Object(h.jsx)("code",{children:"src/App.tsx"})," and save to reload."]}),Object(h.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,17)).then((function(n){var t=n.getCLS,r=n.getFID,s=n.getFCP,u=n.getLCP,c=n.getTTFB;t(e),r(e),s(e),u(e),c(e)}))};i.a.render(Object(h.jsx)(u.a.StrictMode,{children:Object(h.jsx)(j,{})}),document.getElementById("root")),g()}},[[14,1,2]]]);
//# sourceMappingURL=main.74626e22.chunk.js.map