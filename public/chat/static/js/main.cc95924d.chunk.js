(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n.n(c),a=n(9),r=n.n(a),u=(n(16),n(11)),i=n(6),j=(n(17),n(10)),o=n(23),b=n(22),l=n(1);function O(e){return"chat.".concat(e)}function f(e){var t=e.messages,n=Object(c.useRef)(null);Object(c.useEffect)((function(){!function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView()}()}),[t]);return Object(l.jsxs)("div",{className:"messages",children:[t.map((function(e){return Object(l.jsxs)("div",{className:"message",children:[Object(l.jsxs)("div",{className:"info-row",children:[Object(l.jsx)("div",{className:"user",children:e.user}),Object(l.jsx)("div",{className:"time",children:(t=e,Object(o.a)(new Date,new Date(t.createdAt))>=1?Object(b.a)(new Date(t.createdAt),"M.d. H:mm:ss"):Object(b.a)(new Date(t.createdAt),"H:mm:ss"))})]}),Object(l.jsx)("div",{className:"content",children:e.content})]},e.id);var t})),Object(l.jsx)("div",{ref:n})]})}function d(e){var t=e.api,n=e.username,s=Object(c.useState)(""),a=Object(i.a)(s,2),r=a[0],u=a[1],j=Object(c.useCallback)((function(e){"Enter"===e.key&&(t.request(O("add"),{message:{user:n,content:r}}),u(""))}),[r,t]),o=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),[]),Object(l.jsx)("input",{ref:o,className:"input",type:"text",value:r,onChange:function(e){return u(e.target.value)},onKeyDown:j})}function m(e){var t=e.setUsername,n=Object(c.useState)(""),s=Object(i.a)(n,2),a=s[0],r=s[1],u=Object(c.useCallback)((function(e){"Enter"===e.key&&t(a)}),[t,a]);return Object(l.jsxs)("div",{className:"user-prompt",children:["Enter your username:",Object(l.jsx)("input",{className:"user-input",type:"text",value:a,onChange:function(e){return r(e.target.value)},onKeyPress:u})]})}var v=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useMemo)((function(){return Object(j.a)()}),[]);Object(c.useEffect)((function(){a.subscribe("chat-messages",(function(e){s((function(t){return[].concat(Object(u.a)(t),[e])}))})),a.request(O("get"),null).then((function(e){s(e.messages)}))}),[]);var r=Object(c.useState)(""),o=Object(i.a)(r,2),b=o[0],v=o[1];return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("div",{className:"chat",children:""===b?Object(l.jsx)(m,{setUsername:v}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(f,{messages:n}),Object(l.jsx)(d,{api:a,username:b})]})})})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root")),h()}},[[19,1,2]]]);
//# sourceMappingURL=main.cc95924d.chunk.js.map