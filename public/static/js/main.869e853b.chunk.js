(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n.n(c),a=n(10),r=n.n(a),u=(n(17),n(12)),i=n(6),j=(n(18),n(11)),l=n(24),o=n(23),b=n(9),d=n.n(b),O=n(1);function f(e){return"chat.".concat(e)}function m(e){var t=e.messages,n=Object(c.useRef)(null);Object(c.useEffect)((function(){!function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView()}()}),[t]);return Object(O.jsxs)("div",{className:"messages",children:[t.map((function(e){return Object(O.jsxs)("div",{className:"message",children:[Object(O.jsxs)("div",{className:"info-row",children:[Object(O.jsx)("div",{className:"user",children:e.user}),Object(O.jsx)("div",{className:"time",children:(t=e,Object(l.a)(new Date,new Date(t.createdAt))>=1?Object(o.a)(new Date(t.createdAt),"M.d. H:mm:ss"):Object(o.a)(new Date(t.createdAt),"H:mm:ss"))})]}),Object(O.jsx)("div",{className:"content",children:e.content})]},e.id);var t})),Object(O.jsx)("div",{ref:n})]})}function h(e){var t=e.api,n=e.username,s=Object(c.useState)(""),a=Object(i.a)(s,2),r=a[0],u=a[1],j=Object(c.useCallback)((function(){0!==r.length&&(t.request(f("add"),{message:{user:n,content:r}}),u(""))}),[t,n,r]),l=Object(c.useCallback)((function(e){"Enter"===e.key&&j()}),[r,t]),o=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),[]),Object(O.jsxs)("div",{className:"input-wrapper",children:[Object(O.jsx)("input",{ref:o,className:"input",type:"text",placeholder:"Type a message...",value:r,onChange:function(e){return u(e.target.value)},onKeyDown:l}),Object(O.jsx)("i",{className:d()("send-icon","fas","fa-paper-plane",{disabled:0===r.length}),onClick:j})]})}function p(e){var t=e.setUsername,n=Object(c.useState)(""),s=Object(i.a)(n,2),a=s[0],r=s[1],u=Object(c.useCallback)((function(e){"Enter"===e.key&&t(a)}),[t,a]);return Object(O.jsxs)("div",{className:"user-prompt",children:[Object(O.jsx)("input",{className:"user-input",type:"text",placeholder:"Choose your username...",value:a,onChange:function(e){return r(e.target.value)},onKeyPress:u}),Object(O.jsx)("button",{className:d()("enter-button",{disabled:0===a.length}),onClick:function(){return t(a)},children:"Enter"})]})}var v=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useMemo)((function(){return Object(j.a)()}),[]);Object(c.useEffect)((function(){a.subscribe("chat-messages",(function(e){s((function(t){return[].concat(Object(u.a)(t),[e])}))})),a.request(f("get"),null).then((function(e){s(e.messages)}))}),[]);var r=Object(c.useState)(""),l=Object(i.a)(r,2),o=l[0],b=l[1];return Object(O.jsx)("div",{className:"App",children:""===o?Object(O.jsx)(p,{setUsername:b}):Object(O.jsxs)("div",{className:"chat",children:[Object(O.jsx)(m,{messages:n}),Object(O.jsx)(h,{api:a,username:o})]})})};r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(v,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.869e853b.chunk.js.map